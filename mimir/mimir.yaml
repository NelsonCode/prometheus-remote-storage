# Mimir single-instance configuration
target: all,overrides-exporter

# Storage backend configuration
common:
  storage:
    backend: s3
    s3:
      endpoint: minio:9000
      access_key_id: mimir
      secret_access_key: supersecret
      insecure: true
      bucket_name: mimir

# Blocks storage configuration - 2 minutes for testing/demo
blocks_storage:
  storage_prefix: blocks
  tsdb:
    dir: /data/ingester
    # Create blocks every 2 minutes to see metrics in storage quickly
    block_ranges_period:
      - 2m
    # Keep metrics for 7 days
    retention_period: 168h

# Memberlist for gossip protocol
memberlist:
  join_members: [mimir]

# Server configuration
server:
  log_level: info
  http_listen_address: 0.0.0.0
  http_listen_port: 9009

# Single replica settings for single-instance deployment
distributor:
  ring:
    kvstore:
      store: memberlist

ingester:
  ring:
    kvstore:
      store: memberlist
    replication_factor: 1
    heartbeat_timeout: 5m

# Limits
limits:
  max_global_series_per_user: 0
  max_global_exemplars_per_user: 0